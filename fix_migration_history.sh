#!/bin/bash
# Fix migration history by marking missing migrations as reverted

echo "Fixing migration history..."
echo "This will mark old migrations (not in local files) as reverted in the remote database."
echo ""

# List of migrations that are in remote but not in local files
npx supabase migration repair --status reverted \
  20250901013950 \
  20250901045846 \
  20250901075857 \
  20250901082939 \
  20250901103953 \
  20250901104039 \
  20250901111853 \
  20250901112740 \
  20250901114215 \
  20250901122419 \
  20250901123134 \
  20250901125907 \
  20250903010018 \
  20250904010553 \
  20250904011540 \
  20250904105709 \
  20250904120919 \
  20250905012858 \
  20250905042433 \
  20250905042537 \
  20250905042556 \
  20250905074945 \
  20250905081904 \
  20250905090559 \
  20250905090615 \
  20250905093411 \
  20250905093434 \
  20250905093500 \
  20250907014905 \
  20250911034038 \
  20250911041339 \
  20250911045643 \
  20250911045724 \
  20250911050045 \
  20250912044704 \
  20250912092000 \
  20250912102736 \
  20250914101836 \
  20250914102100 \
  20250922010206 \
  20250922021038 \
  20250922023200 \
  20250922034258 \
  20250922053432 \
  20250922084705 \
  20250922102902 \
  20250922125210 \
  20250922125534 \
  20250924022726 \
  20250924022906 \
  20250924032229 \
  20250924052441 \
  20250924071655 \
  20250924094738 \
  20250924113058 \
  20250924113542 \
  20250924115422 \
  20250925024440 \
  20250926042236 \
  20250926074433 \
  20250926104409 \
  20251108155843 \
  20251108174736 \
  20251108222813 \
  20251109160251 \
  20251109204901 \
  20251109205535 \
  20251109220216 \
  20251109221010 \
  20251110022838 \
  20251110023617 \
  20251110023716 \
  20251110024131 \
  20251110024704 \
  20251110033618 \
  20251111195908 \
  20251111202333

echo ""
echo "âœ… Migration history fixed!"
echo "You can now run: npx supabase db pull"
